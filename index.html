<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
        crossorigin="anonymous"
      />
  <title>POS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

</head>

<body>
  <div class="bg-dark p-3">
    <div class="row mx-0 py-3 bg-light">
      <div class="col-sm-8">
        <p>
          Order #88 <small class="text-muted"> Today, 24 Oct 2021, 15:59 PM </small>
        </p>
        
        
        <div class="card rounded-3 mb-3">
          <div class="card-body">
            <ul class="nav nav-pills" id="pills-tab" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active rounded-pill" id="pills-food-tab" 
                data-bs-toggle="pill" data-bs-target="#pills-food"
                type="button" role="tab" 
                aria-controls="pills-food" aria-selected="true"
                >FOOD</button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link rounded-pill" id="pills-drink-tab" 
                data-bs-toggle="pill" data-bs-target="#pills-drink"
                type="button" role="tab" 
                aria-controls="pills-drink" aria-selected="false"
                >DRINK</button>
              </li>
            </ul>
          </div>
        </div>

        
        <div class="tab-content" id="pills-tabContent">

          <!-- FOOD LIST -->
          <div class="tab-pane fade show active" id="pills-food" 
            role="tabpanel" aria-labelledby="pills-food-tab">

            <div class="row row-cols-1 row-cols-md-4 g-4">
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Pho_Mai_Thit_Xong_Khoi_400x275.jpg" 
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Bacon Onion Pizza</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $5.99<input type="image" 
                      onClick="orderCart('Bacon Onion Pizza', 5.99, 'https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Pho_Mai_Thit_Xong_Khoi_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                    
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Thanh_Cua_Ca_Ngu_400x275.jpg" 
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Tuna & Crab Pizza</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $6.99<input type="image" 
                      onClick="orderCart('Tuna & Crab Pizza', 6.99, 'https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Thanh_Cua_Ca_Ngu_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                    
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Bo_Nuong_Tieu_Den_400x275.jpg" 
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Beef & Corn Pizza</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $6.99<input type="image" 
                      onClick="orderCart('Beef & Corn Pizza', 6.99, 'https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Bo_Nuong_Tieu_Den_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                    
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Xuc_Xich_Va_Thom_400x275.jpg" 
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Sausage Pizza</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $4.99<input type="image" 
                      onClick="orderCart('Sausage Pizza', 4.49, 'https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Xuc_Xich_Va_Thom_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                    
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Hai_San_Xot_Pesto_400x275.jpg"
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Seafood Pesto Pizza</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $6.99<input type="image" 
                      onClick="orderCart('Seafood Pesto Pizza', 6.49, 'https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Hai_San_Xot_Pesto_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                    
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Rau_Cu_400x275.jpg"
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Vegie Supreme Pizza</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $5.49<input type="image" 
                      onClick="orderCart('Veggie Supreme Pizza', 5.49, 'https://api.pizzahut.vn/images/Web_V3/Products/Pizza_Rau_Cu_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                    
                  </div>
                </div>
              </div>

          </div>
          </div>

          <!-- DRINK LIST -->
          <div class="tab-pane fade" id="pills-drink" 
            role="tabpanel" aria-labelledby="pills-drink-tab">
            <div class="row row-cols-1 row-cols-md-4 g-4">
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Aquafina_400x275.jpg"
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Aquafina</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $0.99<input type="image" 
                      onClick="orderCart('Aquafina', 0.99, 'https://api.pizzahut.vn/images/Web_V3/Products/Aquafina_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                   
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Pepsi_Can_400x275.jpg"
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Pepsi</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $1.49<input type="image" 
                      onClick="orderCart('Pepsi', 1.49, 'https://api.pizzahut.vn/images/Web_V3/Products/Pepsi_Can_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/7Up_Can_400x275.jpg"
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">7Up</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $1.49<input type="image" 
                      onClick="orderCart('7Up', 1.49, 'https://api.pizzahut.vn/images/Web_V3/Products/7Up_Can_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                    
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card h-100">
                  <img draggable="false" src="https://api.pizzahut.vn/images/Web_V3/Products/Mirinda_Orange_Can_400x275.jpg"
                    class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">Miranda</h5>
                    <span class="d-flex justify-content-between align-items-center">
                      $1.49<input type="image" 
                      onClick="orderCart('Miranda', 1.49, 'https://api.pizzahut.vn/images/Web_V3/Products/Mirinda_Orange_Can_400x275.jpg');"
                      style="width:20px;" draggable="false" src="Images/icon-cart.png">
                    </span>
                    
                  </div>
                </div>
              </div>
                
            </div>
          </div>
        </div>

      </div>


      <div class="col-sm-4">
        <div class="card">
          <div class="card-body">
            <h5 class="d-flex justify-content-between align-items-center">
              <span>Order</span>
              <button onClick="clearCart();"
              class="btn btn-sm btn-danger rounded-pill">Clear</button>
            </h5>
            <hr>

            <ul id="orderlist" class="list-unstyled">
              <!-- <li class="d-flex justify-content-between align-items-center">
                <img src="https://api.pizzahut.vn/images/Web_V3/Products/Pepsi_Can_400x275.jpg" 
                class="w-25"/>
                <span>Pepsi</span>
                <span class="text-danger">$ 1.99</span>
              </li> -->
            </ul>

            <hr>
            <ul class="list-unstyled">
              <li class="d-flex justify-content-between align-items-center">
                <big>Total Items: </big>
                <big id="totalitems" class="card-text">0</big>
              </li>
              <li class="d-flex justify-content-between align-items-center">
                <big>Total Amount: </big>
                <big class="fw-bold"> $ <span id="totalcost" class="card-text">0.00</span>
                </big>
              </li>
              <li>
                <button class="btn btn-primary btn-lg w-100 rounded-pill">CHECK OUT</button>
              </li>
            </ul>
          
          </div>
        </div>
      </div> 



    </div>
  </div>


  <script>

    const orderArray = []; // [itemName, itemPrice, itemImage, itemNumber]

    function orderCart(itemName, itemPrice, itemImage) {

      // check if item existed in the array
      let i = 0;
      let hasOrdered = false;
      while (i < orderArray.length) {
        if (orderArray[i][0] === itemName) {
          hasOrdered = true;
          orderArray[i][3]++; 
          //console.log(orderArray[i]);

        const itemSpan = document.getElementById('amount of ' + itemName);
        itemSpan.innerText = parseInt(itemSpan.innerText) + 1; //increment

        totalItems();
        totalCost();
          break;
        }
        i++;
      }
      //console.log(hasOrdered);

      if (hasOrdered === false) {
        const newOrder = [];
        newOrder.push(itemName, itemPrice, itemImage, 1);
        orderArray.push(newOrder);

        const orderList = document.getElementById('orderlist');

        // Append child <li> tag to OrderList
        const orderItem = newItemInCart(itemName, itemPrice, itemImage);
        const orderButton = changeQuantityButton(itemName, 1);
        orderList.appendChild(orderItem);
        orderList.appendChild(orderButton);
        console.log(orderArray);
      }
  
      //console.log(orderArray);
      
      totalItems();
      totalCost();
    };

    function newItemInCart(itemName, itemPrice, itemImage) {
      // Create the <li> tag
      const orderItem = document.createElement('li');
      orderItem.className = "d-flex justify-content-between align-items-center";

      const orderItemPriceSpan = document.createElement('span');
      const orderItemLeftSpan = document.createElement('span');
      // Create text node with item name and price
      const orderItemName = document.createTextNode('  ' + itemName);
      const orderItemPrice = document.createTextNode(itemPrice);
      // Image
      const orderItemImgTag = document.createElement('img');
      orderItemImgTag.src = itemImage;
      orderItemImgTag.className="w-25 rounded border";

      // Add text color to price
      orderItemPriceSpan.className = 'text-danger';
      orderItemPriceSpan.appendChild(orderItemPrice);

      // Add name and price to the item
      orderItemLeftSpan.appendChild(orderItemImgTag);
      orderItemLeftSpan.appendChild(orderItemName);
      orderItem.appendChild(orderItemLeftSpan);
      orderItem.appendChild(orderItemPriceSpan);

      return orderItem;
    };

    function changeQuantityButton(itemName, itemAmount) {
      // Button
      const decrementButton = document.createElement('button');
      const incrementButton = document.createElement('button');
      const decrementButtonText = document.createTextNode('-');
      const incrementButtonText = document.createTextNode('+');

      const amountItemSpan = document.createElement('span');
      amountItemSpan.className ="fw-bold ms-3";
      amountItemSpan.id = 'amount of ' + itemName;
      //console.log(amountItemSpan);
      const amountItemText = document.createTextNode(itemAmount);
      //amountItemSpan.id = 
      amountItemSpan.appendChild(amountItemText);


      decrementButton.onclick = function() {
        const itemSpan = document.getElementById('amount of ' + itemName);
        itemSpan.innerText = parseInt(itemSpan.innerText) - 1; //decrement

        let i = 0;
        while (i < orderArray.length) {
          if (orderArray[i][0] === itemName) {
            orderArray[i][3]--;
            totalItems();
            totalCost();
            break;
          }
          i++;
        }
      
        if (itemSpan.innerText === '0') {
          deleteItem(itemName);
        }
      };
      
      incrementButton.onclick = function() {
        const itemSpan = document.getElementById('amount of ' + itemName);
        itemSpan.innerText = parseInt(itemSpan.innerText) + 1; //increment        

        let i = 0;
        while (i < orderArray.length) {

          console.log('debug');
          console.log(itemName);
          console.log(orderArray[i][0]);
          if (orderArray[i][0] === itemName) {
            orderArray[i][3]++;
            totalItems();
            totalCost();
            break;
          }
          i++;
        }

        if (itemSpan.innerText === '0') {
          //console.log('deleteItem');
          deleteItem(itemName);
        }
      };


      const orderButton = document.createElement('span');
      orderButton.className ="d-flex justify-content-center align-items-center";

      decrementButton.className = 'btn btn-outline-danger px-3 ms-3';
      incrementButton.className = 'btn btn-outline-danger px-3 ms-3';
      decrementButton.appendChild(decrementButtonText);
      incrementButton.appendChild(incrementButtonText);

      orderButton.appendChild(decrementButton)
      orderButton.appendChild(amountItemSpan);
      orderButton.appendChild(incrementButton);

      totalItems();
      totalCost();

      return orderButton;
    };

    function totalItems() {
      document.getElementById('totalitems').innerText = orderArray.length;
    };

    function totalCost() {
      if (orderArray.length === 0) {
        document.getElementById('totalcost').innerText = 0;
      }
      else {
        let totalPrice = 0;
        let i = 0;
        while (i < orderArray.length) {
          totalPrice += (orderArray[i][1] * orderArray[i][3]); // price * quantity
          i++;
        }
        if (totalPrice <= 0) {
          totalPrice = 0;
        }
        document.getElementById('totalcost').innerText = totalPrice.toFixed(2);
      
      }
    };

    function clearCart() {
      let orderList = document.getElementById('orderlist');
      orderList.innerHTML = '';
      orderArray.length = 0;
      i = 0;
      totalItems();
      totalCost();
    };


     function incrementItem(itemName, val) {
    //   //console.log(itemName);
    //   const itemSpan = document.querySelector(itemName);
    //   itemSpan.innerText = parseInt(itemSpan.innerText) + val;

    //   console.log(itemSpan.innerText);
    //   if (itemSpan.innerText === '0') {
    //     //console.log('0');
    //     deleteItem(itemName);
    //   }
    return 0;
    };

    function deleteItem(itemName) {
      //console.log('delete');

      let i = 0;
      var indexNum = -1;
        while (i < orderArray.length) {
          if (orderArray[i][0] === itemName) {
            totalItems();
            totalCost();
            indexNum = i;
            break;
          }
          i++;
        }

      orderArray.splice(indexNum, 1);

      const orderList = document.getElementById('orderlist');
      //orderList.splice(indexNum, 1);
      orderList.innerHTML = '';

      orderArray.forEach( (order) => {
        //console.log(0);
        const orderItem = newItemInCart(order[0], order[1], order[2]);
        const orderButton = changeQuantityButton(order[0], order[3]);
        orderList.appendChild(orderItem);
        orderList.appendChild(orderButton);
        console.log(orderArray);
      }
      );

      console.log(orderArray);
      console.log(orderList);
      totalItems();
      totalCost();
    }


  </script>


</body>
</html>

<!-- Done part 1-4, (14), 15, 16 -->
